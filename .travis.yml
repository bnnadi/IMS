
language: node_js
sudo: false
node_js:
  - "node"
install:
  - echo 'KEY' >> $HOME/.ssh/known_hosts
  - npm install
addons:
  ssh-keyscan:
  - 104.131.110.212
  - 159.65.39.38
deploy:
  skip_cleanup: true
  provider: script
  before_script:
    - if $TRAVIS_BRANCH === 'development'
    - echo -e "104.131.110.212\n\tStrictHostKeyChecking no\n" >> ~/.ssh/config
    - then
    - echo -e "159.65.39.38\n\tStrictHostKeyChecking no\n" >> ~/.ssh/config
    - fi
  script: ./deploy.sh $TRAVIS_BRANCH
  on:
    all_branches: true
    condition: $TRAVIS_BRANCH =~ ^development|master$
